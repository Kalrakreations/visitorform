<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Visitor Form — Sahil Kalra</title>

  <!-- main stylesheet (we'll update next) -->
  <link rel="stylesheet" href="/form-style.css">

  <!-- PWA / Home-screen icons & manifest -->
  <link rel="icon" href="/icons/icon192.png">
  <link rel="apple-touch-icon" href="/icons/icon192.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#007bff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- small inline note: fonts should be loaded in CSS (system fonts recommended for speed) -->
</head>
<body>

  <!-- HEADER -->
  <header class="site-header" role="banner">
    <div class="header-left">
      <p>
        <a href="https://www.linkedin.com/in/skalra1999/" target="_blank" rel="noopener noreferrer">
          Sahil Kalra
        </a>
        &nbsp;|&nbsp; +91 9646290118
      </p>
    </div>

    <!-- connection + queue indicators: JS will update these -->
    <div class="header-right" aria-hidden="true">
      <span id="connectionStatus" title="Online / Offline status">●</span>
      <span id="queueCount" title="Queued submissions" aria-live="polite" style="margin-left:10px;">0</span>
    </div>
  </header>

  <!-- OFFLINE BANNER (hidden by default; JS will toggle) -->
  <div id="offlineBanner" class="offline-banner" role="status" aria-live="polite" style="display:none;">
    You are offline — submissions will be saved locally and automatically synced when online.
  </div>

  <!-- MAIN FORM -->
  <main class="form-container" role="main">
    <h1>Visitor Form</h1>

    <!-- quick help area (for drag-drop instructions, camera etc) -->
    <p class="muted small">Use camera or upload visiting card. Form works offline and syncs automatically.</p>

    <form id="customerForm" autocomplete="off" novalidate>

      <!-- Event -->
      <div class="input-container">
        <input id="eventName" name="eventName" type="text" placeholder=" " />
        <label for="eventName">Event Name</label>
      </div>

      <!-- Name (letters + spaces only) -->
      <div class="input-container">
        <input id="name" name="name" type="text" placeholder=" " required
               inputmode="text" autocomplete="name"
               aria-required="true"
               title="Only letters and spaces allowed" />
        <label for="name">Name *</label>
      </div>

      <!-- Phone (only + and numbers permitted) -->
      <div class="input-container">
        <input id="phone" name="phone" type="tel" placeholder=" " required
               inputmode="tel" autocomplete="tel"
               pattern="^\+?\d{7,15}$"
               title="Enter phone number (only + and digits). Example: +919876543210" />
        <label for="phone">Phone *</label>
      </div>

      <!-- Email -->
      <div class="input-container">
        <input id="email" name="email" type="email" placeholder=" " inputmode="email" autocomplete="email" />
        <label for="email">Email</label>
      </div>

      <!-- Company -->
      <div class="input-container">
        <input id="company" name="company" type="text" placeholder=" " />
        <label for="company">Company</label>
      </div>

      <!-- Designation (select + other) -->
      <div class="input-container">
        <select id="designation" name="designation" aria-label="Designation">
          <option value="">Select Designation</option>
          <option>Executive</option>
          <option>Manager</option>
          <option>CEO</option>
          <option>Founder</option>
          <option>Other</option>
        </select>
        <input id="designationOther" name="designationOther" type="text" placeholder="Enter your designation" style="display:none;" />
        <label for="designation">Designation</label>
      </div>

      <!-- Country (India default) -->
      <div class="input-container">
        <select id="country" name="country" aria-label="Country">
          <option value="India" selected>India</option>
          <option value="Other">Other</option>
        </select>
        <input id="countryOther" name="countryOther" type="text" placeholder="Enter country" style="display:none;" />
        <label for="country">Country</label>
      </div>

      <!-- State (populated by JS) -->
      <div class="input-container">
        <select id="state" name="state" aria-label="State">
          <option value="">Select State</option>
        </select>
        <input id="stateOther" name="stateOther" type="text" placeholder="Enter state" style="display:none;" />
        <label for="state">State</label>
      </div>

      <!-- City (populated by JS) -->
      <div class="input-container">
        <select id="city" name="city" aria-label="City">
          <option value="">Select City</option>
        </select>
        <input id="cityOther" name="cityOther" type="text" placeholder="Enter city" style="display:none;" />
        <label for="city">City</label>
      </div>

      <!-- Business -->
      <div class="input-container">
        <select id="business" name="business" aria-label="Business">
          <option value="">Select Business</option>
          <option>Employee</option>
          <option>Trader</option>
          <option>Exporter</option>
          <option>E-commerce</option>
          <option>Certification Services</option>
          <option>Other</option>
        </select>
        <input id="businessOther" name="businessOther" type="text" placeholder="Enter business type" style="display:none;" />
        <label for="business">Business Type</label>
      </div>

      <!-- Visiting card uploads - drag & drop + camera capture + preview + progress -->
      <fieldset class="file-fieldset" aria-labelledby="vcLegend">
        <legend id="vcLegend">Visiting Card (Front & Back)</legend>

        <!-- FRONT -->
        <div class="file-drop" data-target="vcFront" id="vcFrontDrop" tabindex="0">
          <input id="vcFront" name="vcFront" type="file" accept="image/*" capture="environment" />
          <div class="drop-instructions">Drop or tap to upload front (camera on mobile)</div>
          <div class="thumb-wrap">
            <img id="vcFrontPreview" alt="Front preview" style="display:none;" />
            <button type="button" class="remove-file" data-remove="vcFront" style="display:none;">Remove</button>
            <div class="progress" id="vcFrontProgress" aria-hidden="true" style="display:none;">
              <div class="progress-bar" style="width:0%"></div>
            </div>
          </div>
        </div>

        <!-- BACK -->
        <div class="file-drop" data-target="vcBack" id="vcBackDrop" tabindex="0">
          <input id="vcBack" name="vcBack" type="file" accept="image/*" capture="environment" />
          <div class="drop-instructions">Drop or tap to upload back (camera on mobile)</div>
          <div class="thumb-wrap">
            <img id="vcBackPreview" alt="Back preview" style="display:none;" />
            <button type="button" class="remove-file" data-remove="vcBack" style="display:none;">Remove</button>
            <div class="progress" id="vcBackProgress" aria-hidden="true" style="display:none;">
              <div class="progress-bar" style="width:0%"></div>
            </div>
          </div>
        </div>

      </fieldset>

      <!-- Submission row -->
      <div class="form-actions">
        <button type="submit" class="submit-btn">Submit</button>
        <button type="button" id="previewQueueBtn" class="muted small" style="margin-left:12px;">Queued (<span id="queueIndicator">0</span>)</button>
      </div>

    </form>

    <!-- queued submissions list (JS will populate) -->
    <section id="queueList" class="queue-list" style="display:none;">
      <h2>Queued submissions</h2>
      <ul id="queueItems" aria-live="polite"></ul>
    </section>

  </main>

  <!-- popup for success/error messages -->
  <div id="formPopup" class="form-popup" role="status" aria-live="polite" style="display:none;"></div>

  <!-- service worker registration (registers /service-worker.js) -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(reg => console.log('Service Worker registered.', reg))
          .catch(err => console.error('Service Worker registration failed:', err));
      });
    }
  </script>

  <!-- main behaviour script (we'll update next) -->
  <script src="/form-script.js" defer></script>

  <!-- helpful notes for developers (hidden) -->
  <!--
    JS hooks to implement next:
      - toggle #offlineBanner visibility & set #connectionStatus (online/offline)
      - populate #state and #city from statesAndCities object
      - handle "Other" inputs display logic (designationOther, countryOther, stateOther, cityOther, businessOther)
      - handle drag/drop & click for .file-drop elements:
          * input change -> render preview image into #vcFrontPreview / #vcBackPreview
          * show remove button & progress bars
      - IndexedDB queue logic & sync when navigator.onLine
      - update #queueIndicator and #queueItems
  -->
</body>
</html>
